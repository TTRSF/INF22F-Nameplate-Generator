# MOD04 Application Programming Interface
### Table of Contents
- [1 Scope](#1-scope)
- [2 Glossary](#2-glossary)
- [3 Module Requirements](#3-module-requirements)
  - [3.1 User View](#31-user-view)
  - [3.2 Requirements](#32-requirements)
  - [3.3 Module Context](#33-module-context)
- [Analysis](#4-analysis)
- [5 Implementation](#5-implementation)
- [6 Module Tests](#6-module-tests)
  - [6.1 Module Test Plan](#61-module-test-plan)
  - [6.2 Module Test Report](#62-module-test-report)
- [7 Summary](#7-summary)
# Changelog
| Version | Date       | Author     | Comment                                         |
| ------- | ---------- | ---------- | ----------------------------------------------- |
| 1.0     | 24.04.2024 | Tristan Kopp | Chapter 1-3 |
| 1.1     | 16.05.2024 | Tristan Kopp| Finished Document|
# 1 Scope
This module provides a application programming interface (API) which delivers a generated nameplate by the information, delivered directly by the user or by a reference to a product on an AASX-server. 

# 2 Glossary
- **AAS** - asset administration shell
- **AASX** - file format to store an asset
- **[AASX-server](https://github.com/admin-shell-io/aasx-server)** - server, that can store AAS assets and has a standardized API specified in the GitHub repository
- **API** - Application Programming Interface
- **HTTP** - Hypertext Transfer Protocol
- **JSON** - JavaScript Object Notation

# 3 Module Requirements 
## 3.1 User View
When the User sends a GET-HTTP-request with a reference of a product in an AASX-server the API returns a namplate with the data of the product deposited in the AASX-server. Otherwise if the user sends a POST-HTTP-Request the user must deliver the necessary data by himself in a JSON-format. 

## 3.2 Requirements

### FR.001 application type
The application shall be developed as server application. It should be usable on all common OS. The application shall provide a machine readable interface.

### FR.002 data source for nameplate generation
The application shall use AAS data for nameplate generation. The user shall be able to choose how AAS data is provided. It shall be possible to provide AAS data directly as input or provide a reference to AAS data. When a reference to AAS data is given, the application shall use the referenced AAS data for nameplate generation

### FR.003 QR-code generator
The application is able to generate QR-codes for the nameplates.

### FR.004 Nameplate generator
It can create nameplates for the chosen asset.

### FR.005 Error handling
The system has sufficient error handling.

## 3.3 Moule Context
The nameplate generation is realized in MOD03. 
When the user chooses to generate a nameplate with his own data the nameplate generator directly uses the JSON that is deliverd in the request.
If the format validater validates the data it returns the nameplate containing the given data.

When the user chooses to generate a nameplate with a reference to an actual product on an AASX-Server he has to hand over the address of the AASX-Server and the actual Path of the product. Then the API returns a nameplate containing the data of the product from the AASX-Server

# 4 Analysis

The API needs to meet the following requirements according to the REST standards:

- Usage of HTTP-methods
- A client-server architecture
- Stateless client-server communication
- A uniform interface between components

# 5 Implementation
The concrete Implementation of the API is seperated into three parts which can be found at `SERVER/src`.

## NameplateGeneration 
The Nameplate Generation is implemented and documented in MOD03.

## DataRetrival
The DataRetrival is a improved version of the in MOD02 implemented AAS-fetcher.

## API
API.js manages all of the API-request.
The NameplateGenerateByData route creates a nameplate by the given JSON. It directly calls the NameplateGeneration function.

The NameplateGenerateByRefernce route 

# 6 Module Tests
In this section all requirements will be tested separately on their functionality.

## 6.1 Module Test Plan
|Req. - ID|Functionality|
|---------|-------------|
|FR.001|Running server on Linux and Windows|
|FR.002|Data source for nameplate generation|
|FR.003|QR-Code generator|
|FR.004|Nameplate generator|
|FR.005|Error handling|

## 6.2 Module Test Report 

|Req. - ID|Pass / Fail|When failed: Observation|Tester|
|:----|:----|:----|:----|
|FR.001|PASS| |Thomas Ekhardt|
|FR.002|PASS| |Thomas Ekhardt|
|FR.003|PASS| |Thomas Ekhardt|
|FR.004|PASS| |Thomas Ekhardt|
|FR.005|PASS| |Thomas Ekhardt|

# 7 Summary
This module provides an API that delivers nameplates for devices. The nameplate can be generated by own data or by an refernce to a product in an AASX-server. 
